@model IEnumerable<WeShop.Models.Product>

@{
    ViewBag.Title = "Products";
    @*Layout = "~/Views/Shared/_Layout.cshtml";*@
}

<br class="mt-5"/>
<table id ="products" class="table table-hover">
    <tr>
        <th>
            Image
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NumberInStock)
        </th>
        <th>
        </th>
    </tr>

    @foreach (var item in Model)
    {
        var imgPath = $"../..{item.ImagePath}";
        <tr>
            <td>
                @*@Html.DisplayFor(modelItem => item.ImagePath)*@
                <img src=@imgPath alt="@item.Name image" width="50" height="50"/>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NumberInStock)
            </td>
            <td>
                @*@Html.ActionLink("Add to cart", "", new {id = item.Id}, new {@class = "btn btn-primary add-to-cart"})*@

                <button class="btn btn-primary add-to-cart-button" data-products-name="@item.Name">Add to cart</button>

            </td>
        </tr>
    }

</table>
<hr/>
<div>

    <br/>
    <ul id="shopping-cart" class="list-group">
       
    </ul>

</div>

@section scripts
{

    <script>
        $(document).ready(function() {

            $("#products").on("click",".add-to-cart-button" ,function() {

                var name = $(this).attr("data-products-name");
                $("#shopping-cart").append('<li class="list-group-item">'+name+'</li>');
                toastr.success("Product successfully added to cart");

            });

        });
    </script>

}


@*<h1 class="mt-4">Products</h1>

    <table id="products" class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Image</th>
                <th>Number in stock</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>




    @Scripts.Render("~/bundles/lib")

    @section scripts
    {

        <script>

            $(document).ready(function () {

                $("#products").DataTable({
                    ajax: {
                        url: "/api/products",
                        dataSrc: ""
                    },
                    columns: [
                        {
                            data: "name"

                        },
                        {
                            data: "imagePath"

                        },
                        {
                            data: "numberInStock"

                        },
                        {
                            data: "description"

                        }
                    ]
                });
            });
        </script>
    }*@